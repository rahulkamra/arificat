<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="738" height="600"  xmlns:ns1="com.artifact.components.*"  styleName="search" backgroundSize="100%">
	<mx:states>
		<mx:State name="clear">
			<mx:RemoveChild target="{txiName}"/>
			<mx:RemoveChild target="{txaDesc}"/>
			<mx:RemoveChild target="{customprogressbar1}"/>
			<mx:RemoveChild target="{image1}"/>
			<mx:RemoveChild target="{label1}"/>
			<mx:RemoveChild target="{lblLevel}"/>
			<mx:RemoveChild target="{imgSpy}"/>
			<mx:RemoveChild target="{lblScout}"/>
			<mx:RemoveChild target="{imagBuy}"/>
			<mx:RemoveChild target="{imgScout}"/>
			<mx:RemoveChild target="{imgShare}"/>
			<mx:RemoveChild target="{label3}"/>
			<mx:RemoveChild target="{lblNoFriends}"/>
			<mx:RemoveChild target="{lblSpy}"/>
			<mx:RemoveChild target="{lblBuy}"/>
			<mx:RemoveChild target="{lblShare}"/>
			<mx:RemoveChild target="{btnClose}"/>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild" target="{btnClose}"/>
			<mx:SetProperty target="{btnClose}" name="x" value="531"/>
			<mx:SetProperty target="{btnClose}" name="y" value="434"/>
			<mx:RemoveChild target="{canvas2}"/>
			<mx:SetProperty target="{canvas1}" name="height" value="478"/>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Button x="482" y="434" label="Back" click="goBack()"/>
			</mx:AddChild>
		</mx:State>
		<mx:State name="spy" basedOn="clear">
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Label y="41" text="Select a friend  to spy on" fontSize="22" horizontalCenter="0" id="label4"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<ns1:FriendsList x="25" y="107" width="593" height="264" dataProvider="{MockController.getFriendsList()}" columnCount="7" id="friendslist1" />
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Image x="37" y="381" width="146" height="78" maintainAspectRatio="false" click="goToQuestionair()" buttonMode="true" id="imgLeftBot">
					<mx:source>@Embed(source='com/artifact/resources/images/SpyBox.png')</mx:source>
				</mx:Image>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:LinkButton alpha="0" x="97" y="405" label="Spy Now" fontSize="14" fontStyle="italic" id="label5" click="goToQuestionair()" fontWeight="normal"/>
			</mx:AddChild>
		</mx:State>
		<mx:State name="questions" basedOn="spy">
			<mx:SetProperty target="{label4}" name="text" value="Answer the following questions"/>
			<mx:SetProperty target="{label5}" name="label" value="Done"/>
			<mx:SetProperty target="{label5}" name="x" value="110"/>
			<mx:SetProperty target="{label5}" name="y" value="407"/>
			<mx:RemoveChild target="{friendslist1}"/>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:VBox x="37" y="104" width="571" height="255">
					<mx:Repeater dataProvider="{MockController.giveQuestions()}" creationComplete="Alert.show(rptQuestions.dataProvider.length)" id="rptQuestions">
						<ns1:Question width="100%" data="{rptQuestions.currentItem}"/>
					</mx:Repeater>
				</mx:VBox>
			</mx:AddChild>
			<mx:SetEventHandler target="{label5}" name="click" handler="goToReport()"/>
			<mx:SetEventHandler target="{imgLeftBot}" name="click" handler="goToReport()"/>
		</mx:State>
		<mx:State name="report" basedOn="clear">
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Label x="164" y="98" text="Corrent  Answers are  :" fontSize="20"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Label x="67" y="156" text="Experience Successfully gained  :" fontSize="20"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Label x="415" y="101" text="{correctAnswers}" fontSize="20"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Label x="415" y="156" text="{experienceGained} %" fontSize="20"/>
			</mx:AddChild>
			<mx:AddChild relativeTo="{canvas1}" position="lastChild">
				<mx:Label x="415" y="156" text="1" fontSize="20"/>
			</mx:AddChild>
		</mx:State>
	</mx:states>
	
	<mx:Canvas x="47.5" y="82" width="642" height="324" styleName="loginApp" id="canvas1">
		<mx:Label x="39" y="24" text="{_data.artifactName}"   id="txiName" fontSize="24" maxWidth="456"  fontStyle="italic" fontWeight="bold" />
		<mx:Label x="533" y="24" text="LVL" fontSize="24" fontStyle="italic" fontWeight="bold" id="label1"/>
		<mx:Label x="594" y="24" text="{_data.artifactLvl}" fontSize="24" fontStyle="italic" fontWeight="bold" maxWidth="61" id="lblLevel" />
		<ns1:CustomProgressBar x="364" y="67" width="258" height="36" percentComplete="{_data.progress}" id="customprogressbar1">
		</ns1:CustomProgressBar>
		<mx:TextArea x="39" y="122" width="254" height="188" alpha="0" fontSize="12" id="txaDesc" editable="false" text="{_data.artifactDesc}">
		</mx:TextArea>
		<mx:Image x="364" y="122" width="258" height="176"   source="com/artifact/resources/images/mapimage.png" maintainAspectRatio="false" id="image1">
		</mx:Image>
	</mx:Canvas>
	<mx:Canvas x="47.5" y="414" width="642" height="148" styleName="loginApp" id="canvas2">
		<mx:Image x="35" y="24" width="128" height="68" source="@Embed(source='com/artifact/resources/images/SpyBox.png')" click="goToSpy()" id="imgSpy" buttonMode="true" />
		<mx:LinkButton alpha="0" x="95" y="41" label="Spy" fontSize="19" fontStyle="italic" fontWeight="normal" id="lblSpy" click="goToSpy()"/>
		
		<mx:Image x="183" y="24" width="131" height="68" source="@Embed(source='com/artifact/resources/images/ScoutBox.png')" click="goToScout()" id="imgScout" buttonMode="true"/>
		<mx:LinkButton alpha="0" x="237" y="41" label="Scout" fontSize="19" fontStyle="italic" id="lblScout" fontWeight="normal" click="goToScout()"/>
		
		<mx:Image x="332" y="24" width="131" height="68" source="@Embed(source='com/artifact/resources/images/buyBox.png')" click="goToBuy()" id="imagBuy" buttonMode="true"/>
		<mx:LinkButton alpha="0" x="400" y="41" label="Buy" fontSize="19" fontStyle="italic" id="lblBuy" fontWeight="normal" click="goToBuy()"/>
		
		<mx:Image x="484" y="24" width="131" height="68" source="@Embed(source='com/artifact/resources/images/ShareBox.png')" click="goToShare()" id="imgShare" buttonMode="true"/>
		<mx:LinkButton alpha="0" x="540" y="41" label="Share" fontStyle="italic" fontSize="19" id="lblShare" fontWeight="normal" click="goToShare()"/>
		
		
		<mx:Label x="35" y="100" text="0" width="20" height="19" fontSize="14" id="lblNoFriends"/>
		<mx:Label alpha="0" x="50" y="100" text="friends also looking for this artifact" width="413"  fontSize="14" id="label3"/>
		
		<mx:Button y="104" label="CLOSE" click="closeMe()" id="btnClose" right="12"/>
	</mx:Canvas>
	<mx:Script>
		<![CDATA[
			import com.artifact.model.ArtifactConstants;
			import mx.collections.ArrayCollection;
			import com.artifact.controller.MockController;
			import mx.controls.Alert;
			import com.artifact.model.SearchModel;
			import mx.managers.PopUpManager;
			
			public var skillType:String;
			[Bindable]
			private var _data:SearchModel;
			
			[Bindable]
			public var experienceGained:int;
			[Bindable]
			public var correctAnswers:int;
				
			override public function set data(value:Object):void{
				this._data=value as SearchModel;
			}
			public function closeMe():void{
				PopUpManager.removePopUp(this);
			}
			public function goToSpy():void{
				skillType=ArtifactConstants.SPY
				currentState='spy'
				
			}
			
			public function goToScout():void{
				skillType=ArtifactConstants.SCOUT
				Alert.show('Scout');
			}
			public function goToBuy():void{
				skillType=ArtifactConstants.BUY
				Alert.show('Buy');
			}
			public function goToShare():void{
				skillType=ArtifactConstants.SHARE
				Alert.show('Share');
			}
			public function goToQuestionair():void{
				if(currentState == 'spy'){
					currentState ='questions'
				}
			}
			public function goToReport():void{
				correctAnswers=12;
				experienceGained=18;
				currentState='report';
			}
			
			public function goBack():void{
				if(currentState == 'spy'){
					currentState='';
				}else if(currentState == 'questions'){
					currentState='spy';
				}else if(currentState == 'report'){
					currentState = '';
				}
			}
		]]>
	</mx:Script>
	<mx:Image x="46.5" y="26" source="@Embed(source='com/artifact/resources/images/arrow.png')"/>
	<mx:Label x="118" y="37" text="Searching" color="#293959" fontSize="27" fontFamily="Georgia" fontStyle="italic"/>
	<mx:Button y="39" right="49" styleName="close" click="closeMe()"/>
</mx:Canvas>
